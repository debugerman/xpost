services:
  xpost:
    image: ghcr.io/missuo/xpost:latest
    pull_policy: always
    container_name: xpost
    restart: unless-stopped
    environment:
      XPOST_ADDR: ":8080"
      XPOST_CONFIG: "/data/config.json"
      XPOST_API_TOKEN: "replace-with-strong-token"
      # OAuth2 (recommended for CLI login flow)
      X_OAUTH2_CLIENT_ID: "replace-with-x-oauth2-client-id"
      X_OAUTH2_CLIENT_SECRET: "replace-with-x-oauth2-client-secret"
      X_OAUTH2_REDIRECT_URI: "replace-with-your-registered-callback-uri"
      X_OAUTH2_SCOPE: "tweet.read,tweet.write,users.read,offline.access"
      # Generated by `xpost login` if you run login in container and persist config volume.
      X_OAUTH2_ACCESS_TOKEN: ""
      X_OAUTH2_REFRESH_TOKEN: ""
      X_OAUTH2_EXPIRES_AT: ""
    ports:
      - "8080:8080"
    volumes:
      - xpost_data:/data

volumes:
  xpost_data:
